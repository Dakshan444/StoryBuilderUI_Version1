<!-- Header -->
<mat-toolbar color="primary" class="header">
    <!-- Project Name and Star -->
    <div class="project-name">
        <span>VirtusaStoryBuilder</span>
        <span class="star"> &nbsp; &#10022; &#x2726; &#10022;</span>
    </div>

    <!-- Navigation Buttons -->
    <div class="nav-buttons">
        <button mat-button (click)="navigateTo('home')">Home</button>
        <button mat-button (click)="navigateTo('about')">About</button>
        <button mat-raised-button color="accent" (click)="navigateTo('login')">Login/Signup</button>
    </div>
</mat-toolbar>

<div class="container">
    <!-- Left side: Upload section -->
    <div class="upload-section">
        <h2>Upload Section</h2>
        <!-- Upload box for file selection -->
        <div class="upload-box" (click)="triggerFileInput()">
            <p>Drag and drop a file here or click to select a file</p>
            <input type="file" id="fileInput" style="display: none;" (change)="onFileSelected($event)" accept=".pdf">
        </div>
        <!-- Display the selected file name -->
        <div *ngIf="selectedFileName" class="selected-file-name">
            <strong>Selected File:</strong> {{ selectedFileName }}
        </div>
        <!-- Button to submit the file -->
        <button mat-raised-button color="primary" (click)="onSubmit()">Generate Story</button>
    </div>

    <!-- Right side: Tabs section -->
    <div class="tabs-section">
        <mat-tab-group>
            <!-- Functionality Tab -->
<mat-tab label="Functionality">
    <div class="tab-content">
        <div *ngFor="let obj of Functionality">
            <div *ngFor="let key of getKeys(obj)">
                    <!-- Header of the expansion panel (headline) -->
                        <mat-panel-title>
                            <h3 style="color: darkblue; font-weight: bold;"> {{key}}</h3>
                        </mat-panel-title>
                    <!-- Inside content of the expansion panel -->
                    <div>
                        <div *ngFor="let item of getObjectValues(obj[key]); let i = index">
                            <ng-container *ngIf="i === 0"> 
                                <p>
                                    <span style="color: rgb(223, 144, 41); font-weight: bold;">&#10022; {{ item[0] }}:</span> {{ item[1] }}
                                </p>
                            </ng-container>
                        </div>
                        
                    </div>     
                              
            </div>
        </div>
    </div>
</mat-tab>

            <!-- User Stories Tab with collapsible sections -->
            <mat-tab label="User Stories">
                <div class="tab-content">
                    <div *ngFor="let obj of UserStories">
                        <div *ngFor="let key of getKeys(obj)">
                            <mat-expansion-panel>
                                <!-- Header of the expansion panel (headline) -->
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <h3 style="color: darkblue; font-weight: bold;">{{ key }}</h3>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <!-- Inside content of the expansion panel -->
                                <div>
                                    <div *ngFor="let item of getObjectValues(obj[key])">
                                        <p>
                                            <span style="color: rgb(223, 144, 41); font-weight: bold;">&#10022; {{ item[0] }}:</span> {{ item[1] }}
                                        </p>
                                    </div>
                                </div>                           
                            </mat-expansion-panel>
                        </div>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>

<router-outlet></router-outlet>
